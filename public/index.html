<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Require Meta Tags -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="index.css">

  <title>TalentStack</title>
</head>
<body>
  <div id="vue-app">

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="/#/">TalentStack</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav">
          <a v-if="!isLoggedIn()" class="dropdown-item" href="/#/signup">Signup</a>
          <a v-if="!isLoggedIn()" class="dropdown-item" href="/#/login">Login</a>
          <div v-if="isLoggedIn()">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Account</a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                <a class="dropdown-item" href="/#/profile">Profile</a>
                <a class="dropdown-item" href="/#/posts/new" v-if="isLoggedIn()">Create Post</a>
                <a class="dropdown-item" href="/#/logout">Sign out</a>
              </div>
            </li>
          </div>
        </ul>
      </div>
    </nav>

    <div class="container">
      <router-view></router-view>
    </div>

  </div>


  <!-- Vue JS -->
  <script src="https://unpkg.com/vue/dist/vue.js"></script>
  <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.js"></script>

  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

  <script src="index.js" defer></script>
</body>
</html>

<!-- /////////////// -->
<!-- // TEMPLATES // -->
<!-- //////////////  -->

<!-- MAIN WEBSITE -->
<!-- Home Page -->
<template id="home-page">
  <div class="vue-component">
    <div class="row">
      <a class="btn btn-primary" href="/">All</a>
      <br>
      <div v-for="tag in tags">
        <a v-bind:href="'/#/tags/' + tag.id" class="btn btn-primary">{{ tag.title }}</a>
        <br>
      </div>
    </div>
    <div class="jumbotron jumbotron-fluid">
      <div class="container">
        <h1 class="display-4">TalentStack</h1>
      </div>
    </div>
    <div class="row">
      <div v-for="post in posts" class="col-md-4">
        <div class="card mb-2">
          <div class="card-body">
            <h3 class="card-title">{{ post.title }}</h3>
            <div class="jumbotron jumbotron-fluid">
              <div class="container">
              </div>
            </div>
            <p class="card-text">{{ post.pitch }}</p>
            <!-- <p class="card-text">Likes: {{ post.likes }}</p> -->
            <!-- <a v-bind:href="'/#/posts/' + post.id" class="btn btn-secondary" >View</a> -->
            <a v-on:click="setCurrentPost(post)" class="btn btn-secondary" data-toggle="modal" data-target="#exampleModal">View</a>
          </div>
        </div>
      </div>
    </div>
    <!-- MODALS -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <!-- If Logged In -->
      <div v-if="isLoggedIn()">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Non-Disclosure Agreement Form</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <p>To maintain your business's competitive advantage, use a Non-Disclosure Agreement (NDA) to protect your proprietary information. Having an NDA form helps protect your intellectual property, like your trade secrets, from getting into the wrong hands. Get it in writing before sharing any confidential information, so both parties understand their duties and privileges.
              </p>
            </div>
            <div class="modal-footer">
              <!-- This button will send the author -->
              <!-- A notification that userA has viewed this.post -->
              <a v-bind:href="'/#/posts/' + currentPost.id" v-on:click="hideModal()" class="btn btn-primary" >Agree</a>
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <!-- If not Logged In -->
      <div v-if="!isLoggedIn()">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Login</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="container">
                <ul>
                  <li class="text-danger" v-for="error in errors">{{ error }}</li>
                </ul>
                <div class="form-group">
                  <label>Email:</label>
                  <input type="email" class="form-control" v-model="email">
                </div>
                <div class="form-group">
                  <label>Password:</label>
                  <input type="password" class="form-control" v-model="password">
                </div>
                <button class="btn btn-primary" v-on:click="submit()">Submit</button>
              </div>
            </div>
            <div class="modal-footer">
              <a href="/#/signup" v-on:click="hideModal()" class="btn btn-primary" >Sign up</a>
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
      
    </div>
  </div>
</template>
<!-- Show Posts by Tags Pages -->
<template id="tags-show-page">
  <div class="vue-component">
    <div class="row">
      <a class="btn btn-primary" href="/">All</a>
      <br>
      <div v-for="tag in tags">
        <a class="btn btn-primary" v-on:click="route(tag)">{{ tag.title }}</a>
        <br>
      </div>
    </div>
    <div class="jumbotron jumbotron-fluid">
      <div class="container">
        <h1 class="display-4">{{ tag.title }}</h1>
      </div>
    </div>
    <div class="row">
      <div v-for="post in tag.posts" class="col-md-4">
        <div class="card mb-2">
          <div class="card-body">
            <h3 class="card-title">{{ post.title }}</h3>
            <div class="jumbotron jumbotron-fluid">
              <div class="container">
              </div>
            </div>
            <p class="card-text">{{ post.pitch }}</p>
            <!-- <p class="card-text">Likes: {{ post.likes }}</p> -->
            <a v-on:click="setCurrentPost(post)" class="btn btn-secondary" data-toggle="modal" data-target="#exampleModal">View</a>
          </div>
        </div>
      </div>
    </div>
    <!-- MODALS -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">

      <!-- If Logged In -->
      <div v-if="isLoggedIn()">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Non-Disclosure Agreement Form</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <p>To maintain your business's competitive advantage, use a Non-Disclosure Agreement (NDA) to protect your proprietary information. Having an NDA form helps protect your intellectual property, like your trade secrets, from getting into the wrong hands. Get it in writing before sharing any confidential information, so both parties understand their duties and privileges.
              </p>
            </div>
            <div class="modal-footer">
              <!-- This button will send the author -->
              <!-- A notification that userA has viewed this.post -->
              <a v-bind:href="'/#/posts/' + currentPost.id" v-on:click="hideModal()" class="btn btn-primary" >Agree</a>
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <!-- If not Logged In -->
      <div v-if="!isLoggedIn()">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Login</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="container">
                <ul>
                  <li class="text-danger" v-for="error in errors">{{ error }}</li>
                </ul>
                <div class="form-group">
                  <label>Email:</label>
                  <input type="email" class="form-control" v-model="email">
                </div>
                <div class="form-group">
                  <label>Password:</label>
                  <input type="password" class="form-control" v-model="password">
                </div>
                <button class="btn btn-primary" v-on:click="submit()">Submit</button>
              </div>
            </div>
            <div class="modal-footer">
              <a href="/#/signup" v-on:click="hideModal()" class="btn btn-primary" >Sign up</a>
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</template>
<!-- User Show Page -->
<template id="users-show-page">
  <div class="vue-component">
    
    <h2>{{ user.full_name }} <button class="btn btn-primary">Message</button></h2>
    <img :src="user.image" alt="">
    <p>{{ user.bio }}</p>
    <div class="row">
      <div v-for="post in user.posts" class="col-md-4">
        <div class="card mb-2">
          <div class="card-body">
            <h3 class="card-title">{{ post.title }}</h3>
            <p class="card-text">{{ post.pitch }}</p>
            <!-- <p class="card-text">Likes: {{ post.likes }}</p> -->
            <a v-bind:href="'/#/posts/' + post.id" class="btn btn-secondary" >View</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<!-- ACCOUNT -->
<!-- Login Page -->
<template id="login-page">
  <div class="vue-component">
    <div class="container">
      <h1>Login</h1>
      <ul>
        <li class="text-danger" v-for="error in errors">{{ error }}</li>
      </ul>
      <div class="form-group">
        <label>Email:</label>
        <input type="email" class="form-control" v-model="email">
      </div>
      <div class="form-group">
        <label>Password:</label>
        <input type="password" class="form-control" v-model="password">
      </div>
      <button class="btn btn-primary" v-on:click="submit()">Submit</button>
    </div>
  </div>
</template>
<!-- Signup Page -->
<template id="signup-page">
  <div class="vue-component">

    <h1>Signup</h1>
    <ul>
      <li class="text-danger" v-for="error in errors">{{ error }}</li>
    </ul>
    <div class="form-group">
      <label>First Name:</label> 
      <input type="text" class="form-control" v-model="first_name">
    </div>
    <div class="form-group">
      <label>Last Name:</label> 
      <input type="text" class="form-control" v-model="last_name">
    </div>
    <div class="form-group">
      <label>Email:</label>
      <input type="email" class="form-control" v-model="email">
    </div>
    <div class="form-group">
      <label>Password:</label>
      <input type="password" class="form-control" v-model="password">
    </div>
    <div class="form-group">
      <label>Password confirmation:</label>
      <input type="password" class="form-control" v-model="password_confirmation">
    </div>
    <button class="btn btn-primary" v-on:click="submit()">Submit</button>
  </div>

  </div>
</template>

<!-- PROFILE -->
<!-- Profile Page -->
<template id="profile-show-page">
  <div class="vue-component">
    
    <h2>{{ user.full_name }}</h2>
    <img :src="user.image" alt="">
    <p>{{ user.bio }}</p>
    <div class="row">
      <div v-for="post in user.posts" class="col-md-4">
        <div class="card mb-2">
          <div class="card-body">
            <h3 class="card-title">{{ post.title }}</h3>
            <p class="card-text">{{ post.pitch }}</p>
            <!-- <p class="card-text">Likes: {{ post.likes }}</p> -->
            <a v-bind:href="'/#/posts/' + post.id" class="btn btn-secondary" >View</a>
          </div>
        </div>
      </div>
    </div>
    <br>
    <a href="/#/profile/edit" class="btn btn-secondary" >Edit Profile</a>
    <a class="btn btn-primary" href="/#/posts/new" >Create Post</a>
  </div>
</template>
<!-- Update User Page -->
<template id="profile-edit-page">
  <div class="vue-component">

    <h1>Edit Profile</h1>
    <ul>
      <li class="text-danger" v-for="error in errors">{{ error }}</li>
    </ul>
    <div class="form-group">
      <label>First Name:</label> 
      <input type="text" class="form-control" v-model="first_name">
    </div>
    <div class="form-group">
      <label>Last Name:</label> 
      <input type="text" class="form-control" v-model="last_name">
    </div>
    <div class="form-group">
      <label>Bio:</label> 
      <input type="text" class="form-control" v-model="bio">
    </div>
    <div class="form-group">
      <label>Profile Picture:</label> 
      <input type="text" class="form-control" v-model="profile_picture">
    </div>
    <button class="btn btn-primary" v-on:click="submit()">Submit</button>
    <button class="btn btn-primary" v-on:click="deleteUser()">Delete Account</button>
  </div>
</template>

<!-- POSTS -->
<!-- Create New Post Page -->
<template id="posts-new-page">
  <div class="vue-component">

    <div class="container">
      <h1>New Idea</h1>
      <ul>
        <li class="text-danger" v-for="error in errors">{{ error }}</li>
      </ul>
      <div class="form-group">
        <label>Title:</label> 
        <input type="text" class="form-control" v-model="title">
      </div>
      <div class="form-group">
        <label>Pitch:</label>
        <input type="text" class="form-control" v-model="pitch">
      </div>
      <p>The below information will be protected by a signed agreement form. This is where any information you feel is pertinent to your idea should be placed.</p>
      <div class="form-group">
        <label>Overview:</label>
        <textarea type="text" class="form-control" rows="5" v-model="body"></textarea>
      </div>
      <div class="form-group">
        <label>I'm Seeking:</label>
        <input type="text" class="form-control" v-model="seeking">
      </div>
      <div class="form-group">
        <label>Tags:</label>
        <div v-for="tag in tags">
          <input type="checkbox" v-model="tag_ids" :id="tag.title" :value="tag.id"> {{tag.title}}<br>
        </div>
      </div>
      <button class="btn btn-primary" v-on:click="submit()">Submit</button>
    </div>

  </div>
</template>
<!-- Show Post Page -->
<template id="posts-show-page">
  <div class="vue-component">
    <h1>{{ post.title }} <a v-if="post.user_id == user.id" v-bind:href="'/#/posts/' + post.id + '/edit'" class="btn btn-primary">Edit</a></h1>
    <p>{{ post.pitch }}</p>
    <p>----------------------</p>
    <h4>Overview:</h4>
    <p>{{ post.body }}</p>
    <h4>I'm Seeking</h4>
    <p>{{ post.seeking }}</p>
    <div v-for="tag in post.tags">
      <button class="btn btn-secondary">#{{tag.title}}</button>
    </div>
    <br>
    <p>Comments:</p>
    <div v-for="comment in post.comments">
      <div class="card mb-2">
        <div class="card-body">
          <div class="container">
            <p>{{comment.body}}</p>
            <div v-for="user in users">
              <a v-if="user.id == comment.user_id" v-bind:href="'/#/users/' + user.id">{{user.full_name}}</a>
            </div>
            <button v-if="comment.user_id == user.id"class="btn btn-secondary" v-on:click="deleteComment(comment)">Delete Comment</button>
          </div>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label>Add Comment:</label>
      <textarea type="text" class="form-control" rows="5" v-model="comment_body"></textarea>
    </div>
    <button class="btn btn-primary" v-on:click="submit()">Submit</button>
  </div>
</template>
<!-- Edit Post Page -->
<template id="posts-edit-page">
  <div class="vue-component">
    <ul>
    <li class="text-danger" v-for="error in errors">{{ error }}</li>
    </ul>

    <div class="form-group">
      <label>Title:</label> 
      <input type="text" class="form-control" v-model="post.title">
    </div>
    <div class="form-group">
      <label>Pitch:</label>
      <input type="text" class="form-control" v-model="post.pitch">
    </div>
    <p>The below information will be protected by a signed agreement form. This is where any information you feel is pertinent to your idea should be placed.</p>
    <div class="form-group">
      <label>Overview:</label>
      <textarea type="text" class="form-control" rows="5" v-model="post.body"></textarea>
    </div>
    <div class="form-group">
      <label>I'm Seeking:</label>
      <input type="text" class="form-control" v-model="post.seeking">
    </div>
    <div class="form-group">
      <label>Tags:</label>
      <div v-for="tag in tags">
        <input type="checkbox" v-model="tag_ids" :id="tag.title" :value="tag.id"> {{tag.title}}<br>
      </div>
    </div>
    <button class="btn btn-primary" v-on:click="submit()">Submit</button>
    <a v-bind:href="'/#/posts/'+ post.id" class="btn btn-secondary">Return</a>
    <button class="btn btn-danger" data-toggle="modal" data-target="#deletePostModal">Delete Post</button>
    <div class="modal fade" id="deletePostModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-body">
            <h4>Are you sure you wish to delete this post?</h4>
            <button class="btn btn-danger" v-on:click="deletePost()">Delete Post</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>